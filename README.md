# Лабораторная работа 4: Библиотека
## Иващенко Юлия Васильевна М8О-102БВ-25

## Описание проекта

Система управления библиотекой с использованием пользовательских коллекций на основе списков и словарей. Проект демонстрирует работу с классами, наследованием, магическими методами и пользовательскими исключениями.

## Структура проекта

```
lab-4/
├── src/
│   ├── books.py           # Базовый класс Book и дочерние классы
│   ├── bookcollection.py  # Коллекция на основе списка
│   ├── indexdict.py       # Коллекция на основе словаря
│   ├── library.py         # Класс Library (объединяет коллекции)
│   ├── constants.py       # Константы (списки авторов, жанров и т.д.)
│   ├── simulation.py      # Симуляция работы библиотеки
│   └── main.py            # CLI интерфейс
├── tests/
│   ├── book_test.py             # Тесты для класса Book
│   ├── books_collection_test.py # Тесты для класса BookColleclion
│   ├── hardcover_test.py        # Тесты для класса HardCover
│   ├── softcover_test.py        # Тесты для класса SoftCover
│   ├── glossycover_test.py      # Тесты для класса GlossyCover
│   └── library_test.py          # Тесты для класса Library
├── pyproject.toml
├── requirements.txt
└── README.md
```

## Реализованные классы

### Book (базовый класс)

Содержит поля: title, author, year, genre, cover_type, isbn, condition, has_images.

*Валидация полей при создании:*
    Название и автор не могут быть пустыми
    Автор и жанр не должны содержать цифры
    Название должно начинаться с большой буквы
    Год должен быть в диапазоне 1800-2027
    Запрещены специальные символы (@, #, $, % и др.)
    Состояние книги должно быть от 0 до 100 процентов

### Дочерние классы

    HardCover (Твердая обложка): более устойчива к повреждениям, при создании получает бонус +20% к состоянию
    SoftCover (Мягкая обложка): стандартная чувствительность к повреждениям
    GlossyCover (Глянцевая обложка): имеет дополнительные царапины, более чувствительна к повреждениям

### BookCollection (на основе списка)

*Магические методы:*
- `__getitem__` - доступ по индексу
- `__iter__` - итерация
- `__len__` - длина коллекции

*Методы:*
add_book(book) - добавление книги в коллекцию
remove_by_title(title) - удаление книги по названию
show_collection() - отображение всех книг

### IndexDict (на основе словаря)

Создает индексы для быстрого поиска по:
ISBN (основной ключ)
Названию книги
Автору
Году издания

*Методы поиска:* 
search_by_isbn(isbn) - поиск по ISBN (O(1))
search_by_title(title) - поиск по названию
search_by_author(author) - поиск по автору
search_by_year(year) - поиск по году

### Library

Library (основной класс библиотеки)
Объединяет BookCollection и IndexDict для эффективного управления.

*Методы:*
add_book(book) - добавление книги в библиотеку
remove_book_by_title(title) - удаление книги по названию
borrow_book_by_title(title) - взятие книги по названию
borrow_book_by_isbn(isbn) - взятие книги по ISBN
search_by_isbn(isbn) - поиск по ISBN
search_by_title(title) - поиск по названию
search_by_author(author) - поиск по автору
search_by_year(year) - поиск по году
show_all_books() - отображение всех книг.



## CLI интерфейс (main.py)

```
СИСТЕМА УПРАВЛЕНИЯ БИБЛИОТЕКОЙ
1. Добавить книгу (по типу обложки)
2. Взять книгу
3. Вернуть книгу
4. Нанести урон книге
5. Найти книгу по ISBN
6. Найти книги по автору
7. Найти книги по жанру
8. Найти книги по году
9. Проверить состояние всех книг
10. Удалить книгу
11. Показать все книги в библиотеке
0. Выход
```

При добавлении книги валидация происходит после каждого ввода с возможностью повторного ввода при ошибке.

## Симуляция (simulation.py)

Автоматическая симуляция работы библиотеки: случайное добавление/удаление книг и поиск. Использует константы из constants.py.

## Тестирование

тесты покрывают:
- Создание книг с валидными и невалидными данными
- Работу коллекций (добавление, удаление, поиск)
- Проверку всех пользовательских исключений
- Работу библиотеки с разными типами книг

Запуск тестов:
```bash
python -m pytest tests/tests.py -v
```

## Запуск программы

```bash
cd lab-4
python -m src.main
```